{% extends "flask_user_layout.html" %}
{% block content %}
<div class="container">
    <h2>Recommender</h2>
</div>
<div><b>Q. Which Genres do you like most? Pick as many as you want</b></div>
<br />

<div class="genre-picker-container">
    <iframe name="form-void" style="display:none;"></iframe>
    <form class="genre-picker" target="form-void" onsubmit="getRecommendations()">
        {% for genre in genres %}
        <label>
            <input type="checkbox" name="{{ genre }}"> {{genre}}
        </label>
        {% endfor %}
    </form>
</div>

<input type="submit" class="btn btn-default btn-primary" value="{%trans%}Submit{%endtrans%}">

{% endblock %}

{% block extra_js %}
<script>
    const checkboxes = document.querySelectorAll(".genre-picker>label>input");
    $("input[type='submit']").click(submitGenres);

    function submitGenres(e) {
        e.preventDefault();
        var checked = [];
        for (var cb of checkboxes) {
            if (cb.checked) {
                checked.push(cb.name);
            }
        }

        if (!checked.length) {
            alert("Please select at least one genre.");
            return;
        }

        alert(checked);
    }
</script>
{% endblock %}